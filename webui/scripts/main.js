"use strict";angular.module("edmApp",["ngMaterial","ngAnimate","ui.router","pascalprecht.translate","ui.ace"]),angular.module("edmApp").config(["$mdThemingProvider","$locationProvider","$urlRouterProvider","$stateProvider","$translateProvider",function(e,n,t,r,a){a.useStaticFilesLoader({prefix:"locales/",suffix:".json"}),a.useSanitizeValueStrategy("escape"),a.determinePreferredLanguage(),a.fallbackLanguage("en-EN"),t.otherwise("/"),n.html5Mode({enabled:!0,requireBase:!0}),r.state("app",{controllerAs:"app",url:"/",controller:"AppController",templateUrl:"views/app.html"})}]),angular.module("edmApp").directive("fileDropper",["$parse",function(e){return{restrict:"A",transclude:!0,template:['<div class="dropper-overlay" translate>DROP_YOUR_FILE_HERE</div>',"<div ng-transclude></div>"],link:function(n,t,r){var a=new Dragster(t[0]),l=e(r.fileDropper);t.bind("dragover",function(e){return e.stopPropagation(),e.preventDefault(),!1}),t.bind("dragster:enter",function(e){return e.stopPropagation(),e.preventDefault(),console.log("dragenter"),angular.element(this).children().eq(0).addClass("active"),!1}),t.bind("dragster:leave",function(e){return e.stopPropagation(),e.preventDefault(),console.log("dragleave"),angular.element(this).children().eq(0).removeClass("active"),!1}),t.bind("drop",function(e){e.stopPropagation(),e.preventDefault(),a.dragleave(e);var t=new FileReader,r={name:e.dataTransfer.files[0].name,size:e.dataTransfer.files[0].size};return t.readAsText(e.dataTransfer.files[0]),t.onload=function(e){r.content=e.target.result,n.$apply(function(){l(n,{$file:r})})},!1})}}}]),angular.module("edmApp").controller("AppController",["$scope","$log","$mdSidenav","$mdMedia","$mdDialog",function(e,n,t,r,a){var l=this;l.locs=0,l.editorContent="",l.filesize=0,l.filename="new_file.s",l.customFullscreen=r("xs")||r("sm"),l.toggleMenu=function(){t("left").toggle()},l.editorChanged=function(e){l.locs=e[1].env.document.getLength()},l.openSettingsDialog=function(e){var t=(r("sm")||r("xs"))&&l.customFullscreen;a.show({controller:"SettingsDialogController",controllerAs:"vm",templateUrl:"views/settings-dialog.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,fullscreen:t}).then(function(e){n.log("Settings dialog resolved",e)},function(){n.log("Settings dialog rejected")})},l.onDropFile=function(e){console.log(e),l.editorContent=e.content,l.filename=e.name,l.filesize=e.size},e.$watch(function(){return r("xs")||r("sm")},function(n){e.customFullscreen=n===!0})}]),angular.module("edmApp").controller("SettingsDialogController",["$mdDialog",function(e){var n=this;n.availableLanguages={"en-EN":"English","it-IT":"Italiano"},n.ok=function(){e.hide()},n.cancel=function(){e.cancel()}}]);